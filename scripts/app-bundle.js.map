{"version":3,"sources":["src/app.ts","src/bootstrapFormRenderer.ts","src/environment.ts","src/main.ts","src/packerGrowing.ts","src/sprites.ts","src/util.ts","src/resources/index.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {RouterConfiguration} from 'aurelia-router';\n\nexport class App {\n    configureRouter(config: RouterConfiguration) {\n        config.title = 'SpriteCSS';\n        config.map([\n            {route: \"\", moduleId: \"sprites\", name: \"sprites\"}\n        ]);\n    }\n}\n","import {RenderInstruction, ValidateResult} from \"aurelia-validation\";\n\nexport class BootstrapFormRenderer {\n    render(instruction: RenderInstruction) {\n        for (let {result, elements} of instruction.unrender) {\n            for (let element of elements) {\n                this.remove(element, result);\n            }\n        }\n\n        for (let {result, elements} of instruction.render) {\n            for (let element of elements) {\n                this.add(element, result);\n            }\n        }\n    }\n\n    add(element: Element, result: ValidateResult) {\n        if (result.valid) {\n            return;\n        }\n\n        const formGroup = element.closest('.form-group');\n        if (!formGroup) {\n            return;\n        }\n\n        // add the has-error class to the enclosing form-group div\n        formGroup.classList.add('has-error');\n\n        // add help-block\n        const message = document.createElement('span');\n        message.className = 'help-block validation-message';\n        message.textContent = result.message;\n        message.id = `validation-message-${result.id}`;\n        formGroup.appendChild(message);\n    }\n\n    remove(element: Element, result: ValidateResult) {\n        if (result.valid) {\n            return;\n        }\n\n        const formGroup = element.closest('.form-group');\n        if (!formGroup) {\n            return;\n        }\n\n        // add the has-success class to the enclosing form-group div\n        formGroup.classList.add('has-success');\n\n        // remove help-block\n        const message = formGroup.querySelector(`#validation-message-${result.id}`);\n        if (message) {\n            formGroup.removeChild(message);\n\n            // remove the has-error class from the enclosing form-group div\n            if (formGroup.querySelectorAll('.help-block.validation-message').length === 0) {\n                formGroup.classList.remove('has-error');\n            }\n        }\n    }\n}","export default {\n  debug: true,\n  testing: true\n};\n","import {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\nexport function configure(aurelia: Aurelia) {\n    aurelia.use\n        .standardConfiguration()\n        .feature('resources')\n        .plugin('aurelia-validation');\n\n    if (environment.debug) {\n        aurelia.use.developmentLogging();\n    }\n\n    if (environment.testing) {\n        aurelia.use.plugin('aurelia-testing');\n    }\n\n    aurelia.start().then(() => aurelia.setRoot());\n}\n","/******************************************************************************\n \n This is a binary tree based bin packing algorithm that is more complex than\n the simple Packer (packer.js). Instead of starting off with a fixed width and\n height, it starts with the width and height of the first block passed and then\n grows as necessary to accomodate each subsequent block. As it grows it attempts\n to maintain a roughly square ratio by making 'smart' choices about whether to\n grow right or down.\n \n When growing, the algorithm can only grow to the right OR down. Therefore, if\n the new block is BOTH wider and taller than the current target then it will be\n rejected. This makes it very important to initialize with a sensible starting\n width and height. If you are providing sorted input (largest first) then this\n will not be an issue.\n \n A potential way to solve this limitation would be to allow growth in BOTH\n directions at once, but this requires maintaining a more complex tree\n with 3 children (down, right and center) and that complexity can be avoided\n by simply chosing a sensible starting block.\n \n Best results occur when the input blocks are sorted by height, or even better\n when sorted by max(width,height).\n \n Inputs:\n ------\n \n blocks: array of any objects that have .w and .h attributes\n \n Outputs:\n -------\n \n marks each block that fits with a .fit attribute pointing to a\n node with .x and .y coordinates\n \n Example:\n -------\n \n var blocks = [\n { w: 100, h: 100 },\n { w: 100, h: 100 },\n { w:  80, h:  80 },\n { w:  80, h:  80 },\n etc\n etc\n ];\n \n var packer = new GrowingPacker();\n packer.fit(blocks);\n \n for(var n = 0 ; n < blocks.length ; n++) {\n var block = blocks[n];\n if (block.fit) {\n Draw(block.fit.x, block.fit.y, block.w, block.h);\n }\n }\n \n \n ******************************************************************************/\nimport {Bloque, Nodo} from \"./sprites\";\n\nexport class GrowingPacker {\n    root: Nodo;\n    fit(blocks: Bloque[]) {\n        blocks.sort((a, b) => {\n            return (b.w + b.h) - (a.w + a.h);\n        });\n        var len = blocks.length;\n        var w = len > 0 ? blocks[0].w : 0;\n        var h = len > 0 ? blocks[0].h : 0;\n        this.root = <Nodo> {x: 0, y: 0, w: w, h: h};\n        for (var i = 0; i < blocks.length; i++) {\n            var block = blocks[i];\n            var node = this.findNode(this.root, block.w, block.h);\n            if (node)\n                block.fit = this.splitNode(node, block.w, block.h);\n            else\n                block.fit = this.growNode(block.w, block.h);\n        }\n    }\n\n    findNode(root: Nodo, w: number, h: number): Nodo {\n        if (root.used)\n            return this.findNode(root.right, w, h) || this.findNode(root.down, w, h);\n        else if ((w <= root.w) && (h <= root.h))\n            return root;\n        else\n            return null;\n    }\n\n    splitNode(node: Nodo, w: number, h: number): Nodo {\n        node.used = true;\n        node.down = <Nodo> {x: node.x, y: node.y + h, w: node.w, h: node.h - h};\n        node.right = <Nodo> {x: node.x + w, y: node.y, w: node.w - w, h: h};\n        return node;\n    }\n\n    growNode(w: number, h: number): Nodo {\n        var canGrowDown = (w <= this.root.w);\n        var canGrowRight = (h <= this.root.h);\n\n        var shouldGrowRight = canGrowRight && (this.root.h >= (this.root.w + w)); // attempt to keep square-ish by growing right when height is much greater than width\n        var shouldGrowDown = canGrowDown && (this.root.w >= (this.root.h + h)); // attempt to keep square-ish by growing down  when width  is much greater than height\n\n        if (shouldGrowRight)\n            return this.growRight(w, h);\n        else if (shouldGrowDown)\n            return this.growDown(w, h);\n        else if (canGrowRight)\n            return this.growRight(w, h);\n        else if (canGrowDown)\n            return this.growDown(w, h);\n        else\n            return null; // need to ensure sensible root starting size to avoid this happening\n    }\n\n    growRight(w: number, h: number): Nodo {\n        this.root = <Nodo> {\n            used: true,\n            x: 0,\n            y: 0,\n            w: this.root.w + w,\n            h: this.root.h,\n            down: this.root,\n            right: {x: this.root.w, y: 0, w: w, h: this.root.h}\n        };\n        var node = this.findNode(this.root, w, h);\n        if (node)\n            return this.splitNode(node, w, h);\n        else\n            return null;\n    }\n\n    growDown(w: number, h: number): Nodo {\n        this.root = <Nodo> {\n            used: true,\n            x: 0,\n            y: 0,\n            w: this.root.w,\n            h: this.root.h + h,\n            down: {x: 0, y: this.root.h, w: this.root.w, h: h},\n            right: this.root\n        };\n        var node = this.findNode(this.root, w, h);\n        if (node)\n            return this.splitNode(node, w, h);\n        else\n            return null;\n    }\n\n};","import {autoinject, TaskQueue} from 'aurelia-framework';\nimport {ValidationRules, ValidationController, validateTrigger} from \"aurelia-validation\";\nimport {BootstrapFormRenderer} from \"./bootstrapFormRenderer\";\nimport {GrowingPacker} from \"./packerGrowing\";\nimport {cargarImagenes, porcentage, colorAleatorio} from \"./util\";\n\nimport * as SVG from \"svg.js\";\n\n@autoinject\nexport class Sprites {\n    private claseBase = \"sprite\";\n    private prefijo = \"sprite-\";\n    private archivos: FileList;\n\n    private nombreArchivo: string;\n    private cssGenerado: string;\n    private ejemplo = \"\";\n    private ejemploVertical = \"\";\n\n    private bloques: Bloque[];\n    private packer: GrowingPacker;\n    private taskqeue: TaskQueue;\n    private validationController: ValidationController;\n    constructor(taskqeue: TaskQueue,\n        validationController: ValidationController) {\n        this.taskqeue = taskqeue;\n        this.validationController = validationController;\n        this.validationController.addRenderer(new BootstrapFormRenderer());\n        this.validationController.validateTrigger = validateTrigger.changeOrBlur;\n    }\n    attached(): void {\n        ValidationRules\n            .ensure((s: Sprites) => s.claseBase)\n            .required().withMessage(`Clase base requerida`)\n            .matches(/^[a-zA-Z_].*$/).withMessage(`Debe de empezar con alguna letra o guión bajo`)\n            .matches(/^(?!__).*$/).withMessage(`No puede empezar con dos guiones bajos`)\n            .matches(/^[a-zA-Z0-9_-]*$/).withMessage(`Sólo puede contener letras, numeros o guiones`)\n            .ensure((s: Sprites) => s.prefijo)\n            .required().withMessage(`Prefijo requerido`)\n            .matches(/^[a-zA-Z_].*$/).withMessage(`Debe de empezar con alguna letra o guión bajo`)\n            .matches(/^(?!__).*$/).withMessage(`No puede empezar con dos guiones bajos`)\n            .matches(/^[a-zA-Z0-9_-]*$/).withMessage(`Sólo puede contener letras, numeros o guiones`)\n            .ensure((s: Sprites) => s.archivos)\n            .required().withMessage(`Selecciona imágenes`)\n            .on(this);\n    }\n    procesar(): void {\n        this.validationController.validate().then(result => {\n            if (result.valid) {\n                this.generar();\n            }\n        });\n    }\n    private generar(): void {\n        this.nombreArchivo = this.claseBase;\n        this.cargarBloques().then(() => {\n            this.packer = new GrowingPacker();\n            this.packer.fit(this.bloques);\n            this.dibujarImagenes();\n            this.generarCss();\n            this.taskqeue.queueMicroTask(() => {\n                document.getElementById(\"divGenerado\").scrollIntoView({behavior: \"smooth\", block: \"start\"});\n            });\n        })\n    }\n    private cargarBloques(): Promise<any> {\n        this.bloques = [];\n        return cargarImagenes(this.archivos).then(imagenes => {\n            for (let i = 0; i < imagenes.length; i++) {\n                this.bloques.push(new Bloque(imagenes[i]));\n            }\n            return Promise.resolve();\n        });\n    }\n    private dibujarImagenes() {\n        if (this.archivos === undefined || this.archivos.length <= 0) {\n            console.log(\"Imagenes requeridas\");\n            return;\n        }\n        var areaDibujo = document.getElementById(\"dibujo\");\n        areaDibujo.innerText = \"\";\n\n        var dibujo = SVG(areaDibujo).size(this.packer.root.w, this.packer.root.h);\n        dibujo.viewbox(0, 0, this.packer.root.w, this.packer.root.h);\n        dibujo.addClass(\"img-responsive\");\n        dibujo.addClass(\"center-block\");\n        var mouseover = function () {\n            this.fill({opacity: 1});\n        }\n        var mouseout = function () {\n            this.fill({opacity: .1});\n        }\n        for (var i = 0; i < this.bloques.length; i++) {\n            var bloque = this.bloques[i];\n            if (bloque.fit) {\n                var rec = dibujo.rect(bloque.w, bloque.h).move(bloque.fit.x, bloque.fit.y).fill({color: colorAleatorio(), opacity: .1}).stroke(\"#000000\");\n                dibujo.image(bloque.image.src).move(bloque.fit.x, bloque.fit.y).style(\"pointer-events\", \"none\");\n                rec.on(\"mouseover\", mouseover);\n                rec.on(\"mouseout\", mouseout);\n                dibujo.plain((i + 1).toString()).move(bloque.fit.x, bloque.fit.y).font({size: 24, family: \"Georgia\"}).fill(\"#000000\");\n            }\n        }\n    }\n    private generarCss(): void {\n        this.bloques.sort((a, b) => {\n            var an = a.name.toLowerCase();\n            var bn = b.name.toLowerCase();\n            if (an > bn) {\n                return 1;\n            } else if (an < bn) {\n                return -1;\n            } else {\n                return 0;\n            }\n        });\n        var width = this.packer.root.w, height = this.packer.root.h;\n        var css = \"\";\n        var reglaBase = \".\".concat(this.claseBase, \" { width: 100%; height: auto; display: inline-block; background-size: 0%; background-image: url(\", this.claseBase, \".png);}\\n\");\n        css += reglaBase;\n        var ajuste = \"svg.\".concat(this.claseBase, \".vertical, img.\", this.claseBase, \".vertical{ height: 100%!important; width: auto!important; padding-top: 0!important;}\\n\");\n        css += ajuste;\n        this.bloques.forEach(bloque => {\n            if (bloque.fit) {\n                var posX = porcentage(bloque.fit.x, width, bloque.w);\n                var posY = porcentage(bloque.fit.y, height, bloque.h);\n                var sizeX = width / bloque.w * 100;\n                var sizeY = height / bloque.h * 100;\n                var aspectRatio = bloque.h / bloque.w * 100;\n                var regla = \".\".concat(this.claseBase, \".\", this.prefijo, bloque.name, \" { padding-top: \", aspectRatio.toString(), \"%; background-position: \", posX.toString(), \"% \", posY.toString(), \"%; background-size: \", sizeX.toString(), \"% \", sizeY.toString(), \"%;}\\n\");\n                css += regla;\n            }\n        });\n        this.ejemplo = \"&lt;span class=&quot;\" + this.claseBase + \" \" + this.prefijo + this.bloques[0].name + \"&quot;&gt;&lt;&#x2F;span&gt;\";\n        this.ejemploVertical = \"&lt;svg viewBox=&quot;0 0 100 150&quot; class=&quot;\" + this.claseBase + \" \" + this.prefijo + this.bloques[0].name + \" vertical&quot;&gt;&lt;&#x2F;svg&gt;\";\n        this.cssGenerado = css;\n    }\n    copiarTexto(): void {\n        if (this.cssGenerado === null) {\n            console.log(\"No hay texto generado\");\n            return;\n        }\n        var t = <HTMLTextAreaElement> document.createElement(\"textarea\");\n        t.style.position = 'fixed';\n        t.style.top = \"0\";\n        t.style.left = \"0\";\n        t.style.width = '2em';\n        t.style.height = '2em';\n        t.style.padding = \"0\";\n        t.style.border = 'none';\n        t.style.outline = 'none';\n        t.style.boxShadow = 'none';\n        t.style.background = 'transparent';\n        t.value = this.cssGenerado;\n\n        document.body.appendChild(t);\n        t.select();\n        try {\n            document.execCommand((\"Copy\"));\n        } catch (err) {\n            console.log(\"Copia no permitida\");\n        }\n        document.body.removeChild(t);\n    }\n    descargarSpriteSheet() {\n        if (this.packer == null || this.bloques === null) {\n            console.log(\"Packer no generado o sin imagenes\");\n            return;\n        }\n        if (this.nombreArchivo === null) {\n            this.nombreArchivo = \"png\";\n        }\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = this.packer.root.w;\n        canvas.height = this.packer.root.h;\n        var ctx = canvas.getContext(\"2d\");\n        for (var i = 0; i < this.bloques.length; i++) {\n            var bloque = this.bloques[i];\n            if (bloque.fit) {\n                ctx.drawImage(bloque.image, bloque.fit.x, bloque.fit.y);\n            }\n        }\n        var a = document.createElement(\"a\");\n        a.setAttribute(\"href\", canvas.toDataURL(\"image/png\"));\n        a.setAttribute(\"download\", this.nombreArchivo + \".png\");\n        a.style.display = \"none\";\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n    }\n    descargarTextoCSS(): void {\n        if (this.cssGenerado === null) {\n            console.log(\"No hay texto generado\");\n            return;\n        }\n        var a = document.createElement(\"a\");\n        a.setAttribute(\"href\", \"data:text/plain;charset=utf-8,\" + encodeURIComponent(this.cssGenerado));\n        a.setAttribute(\"download\", \"sprites.css\");\n        a.style.display = \"none\";\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n    }\n}\nexport class Bloque {\n    image: HTMLImageElement;\n    name: string;\n    w: number;\n    h: number;\n    fit: Nodo;\n    constructor(image: HTMLImageElement) {\n        this.image = image;\n        this.name = image.name.split(\".\")[0].replace(/\\W/g, '-');\n        this.w = image.width;\n        this.h = image.height;\n    }\n}\nexport class Nodo {\n    x: number;\n    y: number;\n    h: number;\n    w: number;\n    right: Nodo;\n    down: Nodo;\n    used = false;\n    constructor(x: number, y: number, h: number, w: number) {\n        this.x = x;\n        this.y = y;\n        this.h = h;\n        this.w = w;\n    }\n}","export function cargarImagenes(archivos: FileList): Promise<HTMLImageElement[]> {\n    var promesas = [];\n    for (var i = 0; i < archivos.length; i++) {\n        promesas.push(cargarImagen(archivos.item(i)));\n    }\n    return Promise.all(promesas);\n}\n\nexport function cargarImagen(archivo: File): Promise<HTMLImageElement> {\n    return new Promise(function (resolve, reject) {\n        var image = new Image();\n        var reader = new FileReader();\n        reader.onload = () => {\n            image.src = reader.result;\n        }\n        image.onload = () => {\n            image.name = archivo.name;\n            resolve(image);\n        }\n        image.onerror = error => {\n            reject(\"Problema al crear imagen \" + archivo.name + \"\\n. Error es: \" + JSON.stringify(error));\n        };\n        reader.onerror = error => {\n            reject(\"Problema al leer archivo \" + archivo.name + \"\\n. Error es: \" + JSON.stringify(error));\n        };\n        reader.readAsDataURL(archivo);\n    });\n}\n\nexport function porcentage(posicion: number, dimensionContenedor: number, dimensionImagen: number): number {\n    var diferencia = dimensionContenedor - dimensionImagen;\n    if (diferencia === 0) {\n        return 0;\n    }\n    return posicion / diferencia * 100;\n}\nexport function colorAleatorio(opacidad?: number): string {\n    var opacidadHex = \"ff\";\n    if (opacidad && opacidad <= 1 && opacidad >= 0) {\n        opacidadHex = Math.floor(opacidad * 256).toString(16);\n        if (opacidadHex.length < 2) {\n            opacidadHex = \"00\".substr(0, 2 - opacidadHex.length) + opacidadHex;\n        }\n    }\n    var colorHex = Math.floor(Math.random() * 16777215).toString(16);\n    if (colorHex.length < 6) {\n        colorHex = \"000000\".substr(0, 6 - colorHex.length) + colorHex;\n    }\n    return \"#\".concat(colorHex).concat(opacidadHex);\n}","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  //config.globalResources([]);\n}\n"],"sourceRoot":".."}